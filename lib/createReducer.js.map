{"version":3,"sources":["createReducer.js"],"names":["createReducer","actionTypes","reducers","MAP","FOCUS","focus","CHANGE","change","TOUCH","touch","TOUCH_ALL","touchAll","BLUR","blur","ARRAY_SWAP","arraySwap","ARRAY_PUSH","arrayPush","ARRAY_POP","arrayPop","ARRAY_SHIFT","arrayShift","ARRAY_UNSHIFT","arrayUnshift","ARRAY_SPLICE","arraySplice","INITIALIZE","initialize","RESET","reset","VALIDITY_UPDATE","updateValidity","ASYNC_VALIDATE_START","setValidateStart","ASYNC_VALIDATE_SUCCEED","setValidateSucceed","ASYNC_VALIDATE_FAILED","setValidateFailed","REGISTER","register","UNREGISTER","unregister","PENDING_START","startPending","PENDING_STOP","stopPending","model","initialValue","customReducers","state","value","meta","action","type","payload","embedReducer","customReducer"],"mappings":";;;;;;;;;;;;;;;;sBAgCwBA,a;;QA3BZC,W;;QACAC,Q;;;;;;;;;;;;;;;;;;;;;AAEZ,QAAMC,uBACDF,YAAYG,KADX,IACmBF,SAASG,KAD5B,OAEDJ,YAAYK,MAFX,IAEoBJ,SAASK,MAF7B,OAGDN,YAAYO,KAHX,IAGmBN,SAASO,KAH5B,OAIDR,YAAYS,SAJX,IAIuBR,SAASS,QAJhC,OAKDV,YAAYW,IALX,IAKkBV,SAASW,IAL3B,OAMDZ,YAAYa,UANX,IAMwBZ,SAASa,SANjC,OAODd,YAAYe,UAPX,IAOwBd,SAASe,SAPjC,OAQDhB,YAAYiB,SARX,IAQuBhB,SAASiB,QARhC,OASDlB,YAAYmB,WATX,IASyBlB,SAASmB,UATlC,OAUDpB,YAAYqB,aAVX,IAU2BpB,SAASqB,YAVpC,OAWDtB,YAAYuB,YAXX,IAW0BtB,SAASuB,WAXnC,OAYDxB,YAAYyB,UAZX,IAYwBxB,SAASyB,UAZjC,OAaD1B,YAAY2B,KAbX,IAamB1B,SAAS2B,KAb5B,OAcD5B,YAAY6B,eAdX,IAc6B5B,SAAS6B,cAdtC,OAeD9B,YAAY+B,oBAfX,IAekC9B,SAAS+B,gBAf3C,OAgBDhC,YAAYiC,sBAhBX,IAgBoChC,SAASiC,kBAhB7C,OAiBDlC,YAAYmC,qBAjBX,IAiBmClC,SAASmC,iBAjB5C,OAkBDpC,YAAYqC,QAlBX,IAkBsBpC,SAASqC,QAlB/B,OAmBDtC,YAAYuC,UAnBX,IAmBwBtC,SAASuC,UAnBjC,OAoBDxC,YAAYyC,aApBX,IAoB2BxC,SAASyC,YApBpC,OAqBD1C,YAAY2C,YArBX,IAqB0B1C,SAAS2C,WArBnC,OAAN;;AAwBe,aAAS7C,aAAT,CAAuB8C,KAAvB,EAAsE;AAAA,YAAxCC,YAAwC,uEAAzB,EAAyB;AAAA,YAArBC,cAAqB,uEAAJ,EAAI;;;AAEjF,eAAO,YAAqD;AAAA,gBAApDC,KAAoD,uEAA5C,EAACC,OAAOH,YAAR,EAAsBI,MAAM,EAA5B,EAA4C;AAAA,gBAAXC,MAAW;AAAA,gBAEnDC,IAFmD,GAElCD,MAFkC,CAEnDC,IAFmD;AAAA,gBAE7CC,OAF6C,GAElCF,MAFkC,CAE7CE,OAF6C;;;AAIxD,gBAAIC,eAAepD,IAAIkD,IAAJ,CAAnB;AACA,gBAAIG,gBAAgBR,eAAeK,IAAf,CAApB;;AAEA;AACA;AACI;AACAC,uBAAWA,QAAQR,KAAR,KAAkBA;AAC7B;AADA,eAEI,CAACS,YAAD,IAAiB,CAACC,aAJ1B,EAKE;AACE,uBAAOP,KAAP;AACH;;AAED,mBAAOO;AACH;AADG,cAEDA,cAAcP,KAAd,EAAqBG,MAArB,EAA6BG,YAA7B,CAFC,GAGDA,aAAaN,KAAb,EAAoBG,MAApB,CAHN;AAKH,SAtBD;AAuBH","file":"createReducer.js","sourcesContent":["/**\n * @file reducer\n * @author leon <ludafa@outlook.com>\n */\n\nimport * as actionTypes from './actionTypes';\nimport * as reducers from './reducers/index';\n\nconst MAP = {\n    [actionTypes.FOCUS]: reducers.focus,\n    [actionTypes.CHANGE]: reducers.change,\n    [actionTypes.TOUCH]: reducers.touch,\n    [actionTypes.TOUCH_ALL]: reducers.touchAll,\n    [actionTypes.BLUR]: reducers.blur,\n    [actionTypes.ARRAY_SWAP]: reducers.arraySwap,\n    [actionTypes.ARRAY_PUSH]: reducers.arrayPush,\n    [actionTypes.ARRAY_POP]: reducers.arrayPop,\n    [actionTypes.ARRAY_SHIFT]: reducers.arrayShift,\n    [actionTypes.ARRAY_UNSHIFT]: reducers.arrayUnshift,\n    [actionTypes.ARRAY_SPLICE]: reducers.arraySplice,\n    [actionTypes.INITIALIZE]: reducers.initialize,\n    [actionTypes.RESET]: reducers.reset,\n    [actionTypes.VALIDITY_UPDATE]: reducers.updateValidity,\n    [actionTypes.ASYNC_VALIDATE_START]: reducers.setValidateStart,\n    [actionTypes.ASYNC_VALIDATE_SUCCEED]: reducers.setValidateSucceed,\n    [actionTypes.ASYNC_VALIDATE_FAILED]: reducers.setValidateFailed,\n    [actionTypes.REGISTER]: reducers.register,\n    [actionTypes.UNREGISTER]: reducers.unregister,\n    [actionTypes.PENDING_START]: reducers.startPending,\n    [actionTypes.PENDING_STOP]: reducers.stopPending\n};\n\nexport default function createReducer(model, initialValue = {}, customReducers = {}) {\n\n    return (state = {value: initialValue, meta: {}}, action) => {\n\n        let {type, payload} = action;\n\n        let embedReducer = MAP[type];\n        let customReducer = customReducers[type];\n\n        // 跳过\n        if (\n            // 不是当前绑定域\n            payload && payload.model !== model\n            // 或者无 reducer 绑定\n            || (!embedReducer && !customReducer)\n        ) {\n            return state;\n        }\n\n        return customReducer\n            // 优先使用自定义 reducer\n            ? customReducer(state, action, embedReducer)\n            : embedReducer(state, action);\n\n    };\n}\n"]}