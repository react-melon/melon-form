{"version":3,"sources":["/src/util/validity.js"],"names":["isValid","resolveAsyncTasks","validity","Object","keys","every","errors","name","Array","isArray","Promise","task","reduce","tasks","push"],"mappings":";;;;;;;;;;;;;;;;YAKgBA,O,GAAAA,O;YAeAC,iB,GAAAA,iB;;;;;;;;AApBhB;;;;;AAKO,aAASD,OAAT,CAAiBE,QAAjB,EAA2B;;AAE9B,YAAIA,YAAY,IAAhB,EAAsB;AAClB,mBAAO,IAAP;AACH;;AAED,eAAOC,OACFC,IADE,CACGF,QADH,EAEFG,KAFE,CAEI,gBAAQ;AACX,gBAAIC,SAASJ,SAASK,IAAT,CAAb;AACA,mBAAOC,MAAMC,OAAN,CAAcH,MAAd,IAAwBN,QAAQM,MAAR,CAAxB,GAA0C,CAACA,MAAlD;AACH,SALE,CAAP;AAOH;;AAEM,aAASL,iBAAT,CAA2BC,QAA3B,EAAqC;;AAExC;AACA,YAAIA,YAAY,IAAZ,IAAoB,QAAOA,QAAP,yCAAOA,QAAP,OAAoB,QAA5C,EAAsD;AAClD,mBAAO,EAAP;AACH;;AAED,YAAIA,oBAAoBQ,OAAxB,EAAiC;AAC7B,mBAAO,CAAC,EAACH,MAAM,EAAP,EAAWI,MAAMT,QAAjB,EAAD,CAAP;AACH;;AAED;AACA,eAAOC,OACFC,IADE,CACGF,QADH,EAEFU,MAFE,CAEK,UAACC,KAAD,EAAQN,IAAR,EAAiB;;AAErB,gBAAII,OAAOT,SAASK,IAAT,CAAX;;AAEA,gBAAII,gBAAgBD,OAApB,EAA6B;AACzBG,sBAAMC,IAAN,CAAW,EAACP,UAAD,EAAOI,UAAP,EAAX;AACH;;AAED,mBAAOE,KAAP;AAEH,SAZE,EAYA,EAZA,CAAP;AAcH","file":"validity.js","sourcesContent":["/**\n * @file validity\n * @author leon <ludafa@outlook.com>\n */\n\nexport function isValid(validity) {\n\n    if (validity == null) {\n        return true;\n    }\n\n    return Object\n        .keys(validity)\n        .every(name => {\n            let errors = validity[name];\n            return Array.isArray(errors) ? isValid(errors) : !errors;\n        });\n\n}\n\nexport function resolveAsyncTasks(validity) {\n\n    // 不是 object 或者已是 promise 的不处理\n    if (validity == null || typeof validity !== 'object') {\n        return [];\n    }\n\n    if (validity instanceof Promise) {\n        return [{name: '', task: validity}];\n    }\n\n    // 在 object 中找出 promise，作成一个 [{name, promise}] 的结构\n    return Object\n        .keys(validity)\n        .reduce((tasks, name) => {\n\n            let task = validity[name];\n\n            if (task instanceof Promise) {\n                tasks.push({name, task});\n            }\n\n            return tasks;\n\n        }, []);\n\n}\n"]}